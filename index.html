You are a Senior Web Developer, Browser Security Specialist,
and API Integration Engineer.

Your task is to DESIGN and BUILD a fully functional
**Universal AI Chat Interface (Google Geminiâ€“style clone)**
as a **STATIC WEBSITE** using NVIDIA Build APIs,
with special attention to **CORS, browser security, and usage transparency**.

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ§± CORE ARCHITECTURE RULES
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
- SINGLE FILE ONLY: `index.html`
- No build tools, no bundlers, no frameworks
- Pure HTML + Tailwind CSS (via CDN) + Vanilla JavaScript
- ALL JavaScript must be placed at the END of `<body>`
- App must run on:
  - file://
  - VS Code Live Server
  - Any static hosting (GitHub Pages, Netlify, etc.)
- NO server-side code

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ¯ APP PURPOSE
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Build a **browser-safe AI chat client** that:
- Uses NVIDIA Build API keys
- Auto-fetches available NVIDIA models
- Streams responses token-by-token
- Allows users to verify **API credits & usage**
- Detects and explains **CORS limitations**
- Never fails silently

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ›‘ CORS & BROWSER SECURITY HANDLING (CRITICAL)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
The app MUST:

1. **Preflight Test**
   - Perform a lightweight authenticated request on startup
   - Detect if CORS is blocked by the browser

2. **Automatic CORS Mitigation**
   - Use only NVIDIA-supported HTTPS endpoints
   - Include required headers explicitly
   - Avoid custom headers that trigger unnecessary preflight

3. **Graceful CORS Failure Handling**
   - If browser blocks request:
     - Show a clear assistant-style message:
       â€œâš ï¸ Browser blocked this request due to CORS restrictions.â€
     - Explain WHY it happens
     - Provide user-safe solutions:
       - Use HTTPS hosting
       - Disable Live Server CORS blocking
       - Use browser with relaxed CORS for local testing

4. **NEVER**
   - Show blank screen
   - Throw uncaught errors
   - Fail silently

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âš™ï¸ SETTINGS MODAL (ADVANCED)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Modal must include:
- NVIDIA API Key input
- Auto-loaded model dropdown
- Manual model override
- API Status section:
  - Connection test result
  - Credits availability
  - Usage summary
- Masked API key after save (â€¢â€¢â€¢â€¢â€¢â€¢)

Behavior:
- Models auto-fetch after API key save
- Credits auto-check after API key save
- Clear visual success / error states

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ” CLIENT-SIDE API KEY OBFUSCATION
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
- Never store API key in plain text
- Use reversible obfuscation (Base64 + salt)
- Decode ONLY at request time
- Store obfuscated value in localStorage
- Comment clearly: â€œThis is obfuscation, not encryptionâ€

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ” MODEL AUTO-FETCH (NVIDIA)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
After API key validation:
- Call NVIDIA Build **models listing endpoint**
- Populate model dropdown dynamically
- Cache model list in localStorage
- Allow manual override

Handle:
- Invalid key
- Empty model list
- Network / CORS failures

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“Š API CREDITS & USAGE VERIFICATION (MANDATORY)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
The app MUST allow users to:
- Check remaining NVIDIA API credits
- View current usage / quota information
- Verify key validity without sending a chat message

Implementation rules:
- Use NVIDIA Build **billing / usage / account endpoint**
- Fetch usage on:
  - API key save
  - Manual â€œCheck Usageâ€ button
- Display results in Settings modal:
  - Credits remaining
  - Usage consumed (if available)
  - Account status (active / limited)

If endpoint is blocked or unavailable:
- Show readable explanation
- Do NOT crash or hide UI

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âš¡ STREAMING TOKEN RESPONSES
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
- Use Fetch API with ReadableStream
- Append tokens incrementally
- Show blinking cursor during stream
- Auto-scroll while streaming
- Disable input during active stream
- Allow clean abort on failure

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ”Œ NVIDIA BUILD API INTEGRATION
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Rules:
- HTTPS fetch only
- Authorization: `Bearer <NVIDIA_API_KEY>`
- Content-Type: `application/json`

Requests must include:
- Selected model
- Full conversation history
- Streaming flag (if supported)

Handle errors:
- 401 â†’ Invalid API Key
- 403 â†’ Permission / credit issue
- 429 â†’ Rate limit exceeded
- CORS block â†’ Explain clearly in UI

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ’¾ STATE MANAGEMENT
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Persist safely in localStorage:
- Obfuscated API key
- Selected model
- Model list cache
- Usage data cache
- Chat histories
- Active chat ID

Ensure:
- Restore state on reload
- No data loss
- Safe fallback if localStorage unavailable

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ§  JAVASCRIPT QUALITY RULES
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
- Clean, readable, commented code
- Modular functions:
  - initApp()
  - testConnection()
  - fetchModels()
  - fetchUsage()
  - sendMessage()
  - streamResponse()
  - encodeKey()
  - decodeKey()
- NO inline JS
- Defensive coding everywhere

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ¨ DESIGN REQUIREMENTS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
- Gemini-inspired minimal UI
- Light mode default
- Rounded cards, subtle shadows
- Fully responsive
- Tailwind utility classes ONLY

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“¦ FINAL OUTPUT RULES
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
- Output ONLY the complete `index.html`
- No explanations
- No markdown
- No extra text
- File must be copy-paste runnable

Build the complete application now.
